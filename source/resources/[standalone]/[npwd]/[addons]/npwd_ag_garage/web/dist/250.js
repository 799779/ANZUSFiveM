"use strict";(self.webpackChunkgarage=self.webpackChunkgarage||[]).push([[250],{6689:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(5949),a=n(5893);const o=(0,r.Z)([(0,a.jsx)("circle",{cx:"15",cy:"13",r:"1"},"0"),(0,a.jsx)("circle",{cx:"9",cy:"13",r:"1"},"1"),(0,a.jsx)("path",{d:"m8.33 7.5-.66 2h8.66l-.66-2z"},"2"),(0,a.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 15.69c0 .45-.35.81-.78.81h-.44c-.44 0-.78-.36-.78-.81V16.5H7v1.19c0 .45-.35.81-.78.81h-.44c-.43 0-.78-.36-.78-.81v-6.5c.82-2.47 1.34-4.03 1.56-4.69.05-.16.12-.29.19-.4.02-.02.03-.04.05-.06.38-.53.92-.54.92-.54h8.56s.54.01.92.53c.02.03.03.05.05.07.07.11.14.24.19.4.22.66.74 2.23 1.56 4.69v6.5z"},"3")],"Garage")},4121:(e,t,n)=>{n.d(t,{x:()=>c,s:()=>l});var r=n(2950),a=n.n(r),o=n(6689),c=function(){return a().createElement(o.Z,{fontSize:"large"})},l=function(){return a().createElement(o.Z,{fontSize:"large"})}},9250:(e,t,n)=>{n.r(t),n.d(t,{externalAppConfig:()=>c,default:()=>l});var r=n(4023),a=n(4121),o=n(4274),c=function(){return{id:"garage",nameLocale:"Garage",color:"#fff",backgroundColor:"#333",path:"/garage",icon:a.x,app:r.Z,notificationIcon:a.s,theme:o.rS}};const l=c},4023:(e,t,n)=>{n.d(t,{Z:()=>v});var r,a,o=n(2950),c=n.n(o),l=n(5475),i=n(6235),s=n(3839),u=n.n(s),d=n(8440),m=n(4810),f=n(5974),p=n(6867),Z=n(2658),x=n(4669),h=n(4958),g=n(7405),E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},E.apply(this,arguments)},b=u().div(w||(r=["\n  flex: 1;\n  padding: 1.5rem;\n  display: flex;\n  box-sizing: border-box;\n  flex-direction: column;\n  overflow: auto;\n  max-height: 100%;\n  background-color: #fafafa;\n  ","\n"],a=["\n  flex: 1;\n  padding: 1.5rem;\n  display: flex;\n  box-sizing: border-box;\n  flex-direction: column;\n  overflow: auto;\n  max-height: 100%;\n  background-color: #fafafa;\n  ","\n"],Object.defineProperty?Object.defineProperty(r,"raw",{value:a}):r.raw=a,w=r),(function(e){return e.isDarkMode&&"\n    background-color: #212121;\n  "})),y=function(e){var t=(0,i.useHistory)(),n=(0,o.useState)([]),r=n[0],a=n[1],l=(0,o.useState)(null),s=l[0],u=l[1],E="dark"===e.theme.palette.mode;return(0,o.useEffect)((function(){(0,g.Z)("npwd:ag_garage:getVehicles").then((function(e){a(e.data)}))}),[]),(0,o.useEffect)((function(){if(r){var e=null==r?void 0:r.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{});u(e)}}),[r]),c().createElement(m.Z,{injectFirst:!0},c().createElement(f.Z,{theme:e.theme},c().createElement(b,{isDarkMode:E},c().createElement(d.h,null,c().createElement(p.Z,{color:"primary",onClick:function(){return t.goBack()}},c().createElement(x.Z,null)),c().createElement(Z.Z,{fontSize:24,color:"primary",fontWeight:"bold"},"Garage")),s&&c().createElement(h.Y,{isDarkMode:E,vehicles:s}))))};const v=function(e){return c().createElement(l.NuiProvider,null,c().createElement(y,E({},e)))};var w},4274:(e,t,n)=>{n.d(t,{rS:()=>l});var r=n(3486),a=n(6115),o=r.Z[500],c=a.Z.white,l={palette:{primary:{main:o,dark:r.Z[700],light:r.Z[300],contrastText:c},secondary:{main:"#d32f2f",light:"#eb4242",dark:"#941212",contrastText:c},success:{main:"#2196f3",contrastText:c}}}},9589:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(2950),a=n.n(r),o=n(2440),c=n(799),l=n(700),i=n(4755),s=n(8584),u=n(2658),d=n(6914),m=n(4637),f=n(9308),p=n(2753),Z=n(6024),x=n(7405);const h=function(e){var t=e.veh;return a().createElement(a().Fragment,null,a().createElement(o.Z,{sx:{width:"70%"}},a().createElement(c.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(l.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Location"},a().createElement(f.Z,null))),a().createElement(s.Z,{primary:t.garage})),a().createElement(c.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(l.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Engine"},a().createElement(Z.Z,null))),a().createElement(s.Z,{primary:a().createElement(u.Z,null,Math.ceil(t.engine/10),"%")})),a().createElement(c.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(l.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Fuel"},a().createElement(p.Z,null))),a().createElement(s.Z,{primary:a().createElement(u.Z,null,Math.ceil(t.fuel),"%")})),a().createElement(c.ZP,{disablePadding:!0,sx:{borderBottom:"1px solid white",mb:"8px"}},a().createElement(l.Z,{sx:{ml:"5px",mr:"20px",minWidth:"25px"}},a().createElement(i.Z,{title:"Body"},a().createElement(m.Z,null))),a().createElement(s.Z,{primary:a().createElement(u.Z,null,Math.ceil(t.body/10),"%")}))),a().createElement(d.Z,{color:"primary",variant:"contained",disabled:"out"!==t.state,onClick:function(){return e=t.plate,void(0,x.Z)("npwd:ag_garage:requestWaypoint",{plate:e}).then((function(e){console.log(e.data)}));var e}},"Track"))}},4958:(e,t,n)=>{n.d(t,{Y:()=>k});var r=n(1508),a=n(2440),o=n(8277),c=n(2981),l=n(799),i=n(7903),s=n(7425),u=n(6447),d=n(2658),m=n(5092),f=n(5137),p=n(3486),Z=n(265),x=n(7036),h=n(2950),g=n.n(h),E=n(6559),b=n(9521),y=n(4637),v=n(327),w=n(9589),k=function(e){var t=e.vehicles,n=(e.isDarkMode,(0,h.useState)("car")),k=n[0],z=n[1],S={car:{icon:g().createElement(y.Z,{sx:{fontSize:35}}),status:{out:f.Z[500],garaged:p.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}},aircraft:{icon:g().createElement(E.Z,{sx:{fontSize:35}}),status:{out:f.Z[500],garaged:p.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}},boat:{icon:g().createElement(v.Z,{sx:{fontSize:35}}),status:{out:f.Z[500],garaged:p.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}},bike:{icon:g().createElement(b.Z,{sx:{fontSize:35}}),status:{out:f.Z[500],garaged:p.Z[500],impounded:Z.Z[500],seized:Z.Z[500],unknown:x.Z[500]}}};return g().createElement(r.Z,null,Object.keys(t).map((function(e){return g().createElement(a.Z,{subheader:g().createElement(o.Z,{sx:{cursor:"pointer",position:"static"},onClick:function(){z(e)}},e.toUpperCase())},g().createElement(c.Z,{in:k===e},t[e].map((function(e){return g().createElement(l.ZP,null,g().createElement(i.Z,{sx:{width:"100%",borderBottom:"4px solid",borderBottomColor:S[e.type].status[e.state]}},g().createElement(s.Z,null,g().createElement(r.Z,{sx:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"}},g().createElement(r.Z,{sx:{display:"flex",gap:3,alignItems:"center"}},S[e.type].icon,g().createElement(u.Z,{spacing:1},g().createElement(d.Z,{sx:{fontSize:15}},e.brand+" "+e.vehicle),g().createElement(d.Z,{sx:{fontSize:15}},e.plate))),g().createElement(d.Z,{sx:{fontSize:14}},e.state.toUpperCase()))),g().createElement(m.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},g().createElement(w.Z,{veh:e}))))}))))})))}},8440:(e,t,n)=>{n.d(t,{h:()=>a});var r=n(3839),a=n.n(r)()("div")({width:"100%",justifyContent:"flex-start",display:"flex",alignItems:"center",gap:20,marginBottom:20})},7405:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(5181);const a=function(e,t,n){return a=this,o=void 0,l=function(){var a;return function(e,t){var n,r,a,o,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((a=(a=c.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){c.label=o[1];break}if(6===o[0]&&c.label<a[1]){c.label=a[1],a=o;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(o);break}a[2]&&c.ops.pop(),c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,(function(o){switch(o.label){case 0:return a={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)},(0,r.Id)()&&n?[2,n]:[4,fetch("https://".concat("npwd_qb_garage","/").concat(e),a)];case 1:return[4,o.sent().json()];case 2:return[2,o.sent()]}}))},new((c=void 0)||(c=Promise))((function(e,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){var a;t.done?e(t.value):(a=t.value,a instanceof c?a:new c((function(e){e(a)}))).then(n,r)}i((l=l.apply(a,o||[])).next())}));var a,o,c,l}},5181:(e,t,n)=>{n.d(t,{Id:()=>r});var r=function(){return!1}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtlLEdBSmxCLElBQWVySSxFQUlhcUksRUFBT2xCLEtBQU9jLEVBQVFJLEVBQU9ySSxRQUoxQ0EsRUFJeURxSSxFQUFPckksTUFKaERBLGFBQWlCK0gsRUFBSS9ILEVBQVEsSUFBSStILEdBQUUsU0FBVUUsR0FBV0EsRUFBUWpJLE9BSVRnQixLQUFLbUgsRUFBV0MsR0FDbEdkLEdBQU1wQixFQUFZQSxFQUFVdkcsTUFBTXFHLEVBQVNDLEdBQWMsS0FBS1csV0FOMUIsSUFBVVosRUFBU0MsRUFBWThCLEVBQUc3QixJLGlDQ0F2RSxJQUFJb0MsRUFBZSxXQUN0QixPQUFPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2FyYWdlLy4vbm9kZV9tb2R1bGVzL0BtdWkvaWNvbnMtbWF0ZXJpYWwvZXNtL0dhcmFnZS5qcyIsIndlYnBhY2s6Ly9nYXJhZ2UvLi9pY29uLnRzeCIsIndlYnBhY2s6Ly9nYXJhZ2UvLi9ucHdkLmNvbmZpZy50cyIsIndlYnBhY2s6Ly9nYXJhZ2UvLi9zcmMvQXBwLnRzeCIsIndlYnBhY2s6Ly9nYXJhZ2UvLi9zcmMvYXBwLnRoZW1lLnRzIiwid2VicGFjazovL2dhcmFnZS8uL3NyYy9jb21wb25lbnRzL1ZlaGljbGVEZXRhaWxzLnRzeCIsIndlYnBhY2s6Ly9nYXJhZ2UvLi9zcmMvY29tcG9uZW50cy9WZWhpY2xlTGlzdC50c3giLCJ3ZWJwYWNrOi8vZ2FyYWdlLy4vc3JjL3N0eWxlcy9oZWFkZXIuc3R5bGVzLnRzIiwid2VicGFjazovL2dhcmFnZS8uL3NyYy91dGlscy9mZXRjaE51aS50cyIsIndlYnBhY2s6Ly9nYXJhZ2UvLi9zcmMvdXRpbHMvbWlzYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3JlYXRlU3ZnSWNvbiBmcm9tICcuL3V0aWxzL2NyZWF0ZVN2Z0ljb24nO1xuaW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVN2Z0ljb24oWy8qI19fUFVSRV9fKi9fanN4KFwiY2lyY2xlXCIsIHtcbiAgY3g6IFwiMTVcIixcbiAgY3k6IFwiMTNcIixcbiAgcjogXCIxXCJcbn0sIFwiMFwiKSwgLyojX19QVVJFX18qL19qc3goXCJjaXJjbGVcIiwge1xuICBjeDogXCI5XCIsXG4gIGN5OiBcIjEzXCIsXG4gIHI6IFwiMVwiXG59LCBcIjFcIiksIC8qI19fUFVSRV9fKi9fanN4KFwicGF0aFwiLCB7XG4gIGQ6IFwibTguMzMgNy41LS42NiAyaDguNjZsLS42Ni0yelwiXG59LCBcIjJcIiksIC8qI19fUFVSRV9fKi9fanN4KFwicGF0aFwiLCB7XG4gIGQ6IFwiTTIwIDJINGMtMS4xIDAtMiAuOS0yIDJ2MTZjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY0YzAtMS4xLS45LTItMi0yem0tMSAxNS42OWMwIC40NS0uMzUuODEtLjc4LjgxaC0uNDRjLS40NCAwLS43OC0uMzYtLjc4LS44MVYxNi41SDd2MS4xOWMwIC40NS0uMzUuODEtLjc4LjgxaC0uNDRjLS40MyAwLS43OC0uMzYtLjc4LS44MXYtNi41Yy44Mi0yLjQ3IDEuMzQtNC4wMyAxLjU2LTQuNjkuMDUtLjE2LjEyLS4yOS4xOS0uNC4wMi0uMDIuMDMtLjA0LjA1LS4wNi4zOC0uNTMuOTItLjU0LjkyLS41NGg4LjU2cy41NC4wMS45Mi41M2MuMDIuMDMuMDMuMDUuMDUuMDcuMDcuMTEuMTQuMjQuMTkuNC4yMi42Ni43NCAyLjIzIDEuNTYgNC42OXY2LjV6XCJcbn0sIFwiM1wiKV0sICdHYXJhZ2UnKTsiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBHYXJhZ2UgfSBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsJztcclxuZXhwb3J0IHZhciBHYXJhZ2VJY29uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoR2FyYWdlLCB7IGZvbnRTaXplOiBcImxhcmdlXCIgfSk7XHJcbn07XHJcbmV4cG9ydCB2YXIgTm90aWZpY2F0aW9uSWNvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KEdhcmFnZSwgeyBmb250U2l6ZTogXCJsYXJnZVwiIH0pO1xyXG59O1xyXG4iLCJpbXBvcnQgQXBwIGZyb20gJy4vc3JjL0FwcCc7XHJcbmltcG9ydCB7IEdhcmFnZUljb24sIE5vdGlmaWNhdGlvbkljb24gfSBmcm9tICcuL2ljb24nO1xyXG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gJy4vc3JjL2FwcC50aGVtZSc7XHJcbmV4cG9ydCB2YXIgZXh0ZXJuYWxBcHBDb25maWcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAoe1xyXG4gICAgaWQ6ICdnYXJhZ2UnLFxyXG4gICAgbmFtZUxvY2FsZTogJ0dhcmFnZScsXHJcbiAgICBjb2xvcjogJyNmZmYnLFxyXG4gICAgYmFja2dyb3VuZENvbG9yOiAnIzMzMycsXHJcbiAgICBwYXRoOiAnL2dhcmFnZScsXHJcbiAgICBpY29uOiBHYXJhZ2VJY29uLFxyXG4gICAgYXBwOiBBcHAsXHJcbiAgICBub3RpZmljYXRpb25JY29uOiBOb3RpZmljYXRpb25JY29uLFxyXG4gICAgdGhlbWU6IHRoZW1lLFxyXG59KTsgfTtcclxuZXhwb3J0IGRlZmF1bHQgZXh0ZXJuYWxBcHBDb25maWc7XHJcbiIsInZhciBfX21ha2VUZW1wbGF0ZU9iamVjdCA9ICh0aGlzICYmIHRoaXMuX19tYWtlVGVtcGxhdGVPYmplY3QpIHx8IGZ1bmN0aW9uIChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcbnZhciBfX2Fzc2lnbiA9ICh0aGlzICYmIHRoaXMuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcclxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcclxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IE51aVByb3ZpZGVyIH0gZnJvbSAncmVhY3QtZml2ZW0taG9va3MnO1xyXG5pbXBvcnQgeyB1c2VIaXN0b3J5IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyBIZWFkZXIgfSBmcm9tICcuL3N0eWxlcy9oZWFkZXIuc3R5bGVzJztcclxuaW1wb3J0IHsgSWNvbkJ1dHRvbiwgU3R5bGVkRW5naW5lUHJvdmlkZXIsIFRoZW1lUHJvdmlkZXIsIFR5cG9ncmFwaHkgfSBmcm9tICdAbXVpL21hdGVyaWFsJztcclxuaW1wb3J0IHsgQXJyb3dCYWNrIH0gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbCc7XHJcbmltcG9ydCB7IFZlaGljbGVMaXN0IH0gZnJvbSAnLi9jb21wb25lbnRzL1ZlaGljbGVMaXN0JztcclxuaW1wb3J0IGZldGNoTnVpIGZyb20gJy4vdXRpbHMvZmV0Y2hOdWknO1xyXG52YXIgQ29udGFpbmVyID0gc3R5bGVkLmRpdih0ZW1wbGF0ZU9iamVjdF8xIHx8ICh0ZW1wbGF0ZU9iamVjdF8xID0gX19tYWtlVGVtcGxhdGVPYmplY3QoW1wiXFxuICBmbGV4OiAxO1xcbiAgcGFkZGluZzogMS41cmVtO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgb3ZlcmZsb3c6IGF1dG87XFxuICBtYXgtaGVpZ2h0OiAxMDAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTtcXG4gIFwiLCBcIlxcblwiXSwgW1wiXFxuICBmbGV4OiAxO1xcbiAgcGFkZGluZzogMS41cmVtO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgb3ZlcmZsb3c6IGF1dG87XFxuICBtYXgtaGVpZ2h0OiAxMDAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTtcXG4gIFwiLCBcIlxcblwiXSkpLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBpc0RhcmtNb2RlID0gX2EuaXNEYXJrTW9kZTtcclxuICAgIHJldHVybiBpc0RhcmtNb2RlICYmXHJcbiAgICAgICAgXCJcXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzIxMjEyMTtcXG4gIFwiO1xyXG59KTtcclxudmFyIEFwcCA9IGZ1bmN0aW9uIChwcm9wcykge1xyXG4gICAgdmFyIGhpc3RvcnkgPSB1c2VIaXN0b3J5KCk7XHJcbiAgICB2YXIgX2EgPSB1c2VTdGF0ZShbXSksIHZlaGljbGVzID0gX2FbMF0sIHNldFZlaGljbGVzID0gX2FbMV07XHJcbiAgICB2YXIgX2IgPSB1c2VTdGF0ZShudWxsKSwgbWFwcGVkVmVoID0gX2JbMF0sIHNldE1hcHBlZFZlaCA9IF9iWzFdO1xyXG4gICAgdmFyIGlzRGFya01vZGUgPSBwcm9wcy50aGVtZS5wYWxldHRlLm1vZGUgPT09ICdkYXJrJztcclxuICAgIHVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZmV0Y2hOdWkoJ25wd2Q6YWdfZ2FyYWdlOmdldFZlaGljbGVzJykudGhlbihmdW5jdGlvbiAocmVzcCkge1xyXG4gICAgICAgICAgICBzZXRWZWhpY2xlcyhyZXNwLmRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSwgW10pO1xyXG4gICAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodmVoaWNsZXMpIHtcclxuICAgICAgICAgICAgdmFyIG1hcHBlZFZlaGljbGVzID0gdmVoaWNsZXMgPT09IG51bGwgfHwgdmVoaWNsZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZlaGljbGVzLnJlZHVjZShmdW5jdGlvbiAodmVocywgdmVoaWNsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF2ZWhzW3ZlaGljbGUudHlwZV0pXHJcbiAgICAgICAgICAgICAgICAgICAgdmVoc1t2ZWhpY2xlLnR5cGVdID0gW107XHJcbiAgICAgICAgICAgICAgICB2ZWhzW3ZlaGljbGUudHlwZV0ucHVzaCh2ZWhpY2xlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2ZWhzO1xyXG4gICAgICAgICAgICB9LCB7fSk7XHJcbiAgICAgICAgICAgIHNldE1hcHBlZFZlaChtYXBwZWRWZWhpY2xlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgW3ZlaGljbGVzXSk7XHJcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3R5bGVkRW5naW5lUHJvdmlkZXIsIHsgaW5qZWN0Rmlyc3Q6IHRydWUgfSxcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRoZW1lUHJvdmlkZXIsIHsgdGhlbWU6IHByb3BzLnRoZW1lIH0sXHJcbiAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQ29udGFpbmVyLCB7IGlzRGFya01vZGU6IGlzRGFya01vZGUgfSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSGVhZGVyLCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoSWNvbkJ1dHRvbiwgeyBjb2xvcjogXCJwcmltYXJ5XCIsIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGhpc3RvcnkuZ29CYWNrKCk7IH0gfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBcnJvd0JhY2ssIG51bGwpKSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgZm9udFNpemU6IDI0LCBjb2xvcjogXCJwcmltYXJ5XCIsIGZvbnRXZWlnaHQ6IFwiYm9sZFwiIH0sIFwiR2FyYWdlXCIpKSxcclxuICAgICAgICAgICAgICAgIG1hcHBlZFZlaCAmJiBSZWFjdC5jcmVhdGVFbGVtZW50KFZlaGljbGVMaXN0LCB7IGlzRGFya01vZGU6IGlzRGFya01vZGUsIHZlaGljbGVzOiBtYXBwZWRWZWggfSkpKSkpO1xyXG59O1xyXG52YXIgV2l0aFByb3ZpZGVycyA9IGZ1bmN0aW9uIChwcm9wcykgeyByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoTnVpUHJvdmlkZXIsIG51bGwsXHJcbiAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEFwcCwgX19hc3NpZ24oe30sIHByb3BzKSkpKTsgfTtcclxuZXhwb3J0IGRlZmF1bHQgV2l0aFByb3ZpZGVycztcclxudmFyIHRlbXBsYXRlT2JqZWN0XzE7XHJcbiIsImltcG9ydCB7IGNvbW1vbiwgZ3JlZW4gfSBmcm9tICdAbXVpL21hdGVyaWFsL2NvbG9ycyc7XHJcbmV4cG9ydCB2YXIgQVBQX1BSSU1BUllfQ09MT1IgPSBncmVlbls1MDBdO1xyXG5leHBvcnQgdmFyIEFQUF9URVhUX0NPTE9SID0gY29tbW9uLndoaXRlO1xyXG5leHBvcnQgdmFyIHRoZW1lID0ge1xyXG4gICAgcGFsZXR0ZToge1xyXG4gICAgICAgIHByaW1hcnk6IHtcclxuICAgICAgICAgICAgbWFpbjogQVBQX1BSSU1BUllfQ09MT1IsXHJcbiAgICAgICAgICAgIGRhcms6IGdyZWVuWzcwMF0sXHJcbiAgICAgICAgICAgIGxpZ2h0OiBncmVlblszMDBdLFxyXG4gICAgICAgICAgICBjb250cmFzdFRleHQ6IEFQUF9URVhUX0NPTE9SLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2Vjb25kYXJ5OiB7XHJcbiAgICAgICAgICAgIG1haW46ICcjZDMyZjJmJyxcclxuICAgICAgICAgICAgbGlnaHQ6ICcjZWI0MjQyJyxcclxuICAgICAgICAgICAgZGFyazogJyM5NDEyMTInLFxyXG4gICAgICAgICAgICBjb250cmFzdFRleHQ6IEFQUF9URVhUX0NPTE9SLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VjY2Vzczoge1xyXG4gICAgICAgICAgICBtYWluOiAnIzIxOTZmMycsXHJcbiAgICAgICAgICAgIGNvbnRyYXN0VGV4dDogQVBQX1RFWFRfQ09MT1IsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbn07XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEJ1dHRvbiwgTGlzdCwgTGlzdEl0ZW0sIExpc3RJdGVtSWNvbiwgTGlzdEl0ZW1UZXh0LCBUb29sdGlwLCBUeXBvZ3JhcGh5LCB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgRGlyZWN0aW9uc0Nhckljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9EaXJlY3Rpb25zQ2FyJztcclxuaW1wb3J0IExvY2F0aW9uT25JY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvTG9jYXRpb25Pbic7XHJcbmltcG9ydCBMb2NhbEdhc1N0YXRpb25JY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvTG9jYWxHYXNTdGF0aW9uJztcclxuaW1wb3J0IEJ1aWxkSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0J1aWxkJztcclxuaW1wb3J0IGZldGNoTnVpIGZyb20gJy4uL3V0aWxzL2ZldGNoTnVpJztcclxudmFyIFZlaGljbGVEZXRhaWxzID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgdmVoID0gX2EudmVoO1xyXG4gICAgdmFyIGhhbmRsZVRyYWNrVmVoaWNsZSA9IGZ1bmN0aW9uIChwbGF0ZSkge1xyXG4gICAgICAgIGZldGNoTnVpKCducHdkOmFnX2dhcmFnZTpyZXF1ZXN0V2F5cG9pbnQnLCB7IHBsYXRlOiBwbGF0ZSB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCwgbnVsbCxcclxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3QsIHsgc3g6IHsgd2lkdGg6ICc3MCUnIH0gfSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbSwgeyBkaXNhYmxlUGFkZGluZzogdHJ1ZSwgc3g6IHsgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHdoaXRlJywgbWI6ICc4cHgnIH0gfSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW1JY29uLCB7IHN4OiB7IG1sOiAnNXB4JywgbXI6ICcyMHB4JywgbWluV2lkdGg6ICcyNXB4JyB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7IHRpdGxlOiBcIkxvY2F0aW9uXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMb2NhdGlvbk9uSWNvbiwgbnVsbCkpKSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW1UZXh0LCB7IHByaW1hcnk6IHZlaC5nYXJhZ2UgfSkpLFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtLCB7IGRpc2FibGVQYWRkaW5nOiB0cnVlLCBzeDogeyBib3JkZXJCb3R0b206ICcxcHggc29saWQgd2hpdGUnLCBtYjogJzhweCcgfSB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbUljb24sIHsgc3g6IHsgbWw6ICc1cHgnLCBtcjogJzIwcHgnLCBtaW5XaWR0aDogJzI1cHgnIH0gfSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsgdGl0bGU6IFwiRW5naW5lXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdWlsZEljb24sIG51bGwpKSksXHJcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtVGV4dCwgeyBwcmltYXJ5OiBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguY2VpbCh2ZWguZW5naW5lIC8gMTApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiVcIikgfSkpLFxyXG4gICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtLCB7IGRpc2FibGVQYWRkaW5nOiB0cnVlLCBzeDogeyBib3JkZXJCb3R0b206ICcxcHggc29saWQgd2hpdGUnLCBtYjogJzhweCcgfSB9LFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbUljb24sIHsgc3g6IHsgbWw6ICc1cHgnLCBtcjogJzIwcHgnLCBtaW5XaWR0aDogJzI1cHgnIH0gfSxcclxuICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRvb2x0aXAsIHsgdGl0bGU6IFwiRnVlbFwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTG9jYWxHYXNTdGF0aW9uSWNvbiwgbnVsbCkpKSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW1UZXh0LCB7IHByaW1hcnk6IFJlYWN0LmNyZWF0ZUVsZW1lbnQoVHlwb2dyYXBoeSwgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5jZWlsKHZlaC5mdWVsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCIlXCIpIH0pKSxcclxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbSwgeyBkaXNhYmxlUGFkZGluZzogdHJ1ZSwgc3g6IHsgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHdoaXRlJywgbWI6ICc4cHgnIH0gfSxcclxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoTGlzdEl0ZW1JY29uLCB7IHN4OiB7IG1sOiAnNXB4JywgbXI6ICcyMHB4JywgbWluV2lkdGg6ICcyNXB4JyB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUb29sdGlwLCB7IHRpdGxlOiBcIkJvZHlcIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KERpcmVjdGlvbnNDYXJJY29uLCBudWxsKSkpLFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0SXRlbVRleHQsIHsgcHJpbWFyeTogUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmNlaWwodmVoLmJvZHkgLyAxMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiJVwiKSB9KSkpLFxyXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnV0dG9uLCB7IGNvbG9yOiBcInByaW1hcnlcIiwgdmFyaWFudDogXCJjb250YWluZWRcIiwgZGlzYWJsZWQ6IHZlaC5zdGF0ZSAhPT0gJ291dCcsIG9uQ2xpY2s6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGhhbmRsZVRyYWNrVmVoaWNsZSh2ZWgucGxhdGUpOyB9IH0sIFwiVHJhY2tcIikpKTtcclxufTtcclxuZXhwb3J0IGRlZmF1bHQgVmVoaWNsZURldGFpbHM7XHJcbiIsImltcG9ydCB7IEJveCwgTGlzdEl0ZW0sIExpc3QsIExpc3RTdWJoZWFkZXIsIENvbGxhcHNlLCBBY2NvcmRpb24sIEFjY29yZGlvblN1bW1hcnksIFR5cG9ncmFwaHksIEFjY29yZGlvbkRldGFpbHMsIFN0YWNrLCB9IGZyb20gJ0BtdWkvbWF0ZXJpYWwnO1xyXG5pbXBvcnQgeyBncmVlbiwgZ3JleSwgb3JhbmdlLCByZWQgfSBmcm9tICdAbXVpL21hdGVyaWFsL2NvbG9ycyc7XHJcbmltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IEZsaWdodEljb24gZnJvbSAnQG11aS9pY29ucy1tYXRlcmlhbC9GbGlnaHQnO1xyXG5pbXBvcnQgUGVkYWxCaWtlSWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL1BlZGFsQmlrZSc7XHJcbmltcG9ydCBEaXJlY3Rpb25zQ2FySWNvbiBmcm9tICdAbXVpL2ljb25zLW1hdGVyaWFsL0RpcmVjdGlvbnNDYXInO1xyXG5pbXBvcnQgRGlyZWN0aW9uc0JvYXRJY29uIGZyb20gJ0BtdWkvaWNvbnMtbWF0ZXJpYWwvRGlyZWN0aW9uc0JvYXQnO1xyXG5pbXBvcnQgVmVoaWNsZURldGFpbHMgZnJvbSAnLi9WZWhpY2xlRGV0YWlscyc7XHJcbmV4cG9ydCB2YXIgVmVoaWNsZUxpc3QgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciB2ZWhpY2xlcyA9IF9hLnZlaGljbGVzLCBpc0RhcmtNb2RlID0gX2EuaXNEYXJrTW9kZTtcclxuICAgIHZhciBfYiA9IHVzZVN0YXRlKCdjYXInKSwgY29sbGFwc2VJZCA9IF9iWzBdLCBzZXRDb2xsYXBzZUlkID0gX2JbMV07XHJcbiAgICB2YXIgdHlwZUljb24gPSB7XHJcbiAgICAgICAgY2FyOiB7XHJcbiAgICAgICAgICAgIGljb246IFJlYWN0LmNyZWF0ZUVsZW1lbnQoRGlyZWN0aW9uc0Nhckljb24sIHsgc3g6IHsgZm9udFNpemU6IDM1IH0gfSksXHJcbiAgICAgICAgICAgIHN0YXR1czoge1xyXG4gICAgICAgICAgICAgICAgb3V0OiBvcmFuZ2VbNTAwXSxcclxuICAgICAgICAgICAgICAgIGdhcmFnZWQ6IGdyZWVuWzUwMF0sXHJcbiAgICAgICAgICAgICAgICBpbXBvdW5kZWQ6IHJlZFs1MDBdLFxyXG4gICAgICAgICAgICAgICAgc2VpemVkOiByZWRbNTAwXSxcclxuICAgICAgICAgICAgICAgIHVua25vd246IGdyZXlbNTAwXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFpcmNyYWZ0OiB7XHJcbiAgICAgICAgICAgIGljb246IFJlYWN0LmNyZWF0ZUVsZW1lbnQoRmxpZ2h0SWNvbiwgeyBzeDogeyBmb250U2l6ZTogMzUgfSB9KSxcclxuICAgICAgICAgICAgc3RhdHVzOiB7XHJcbiAgICAgICAgICAgICAgICBvdXQ6IG9yYW5nZVs1MDBdLFxyXG4gICAgICAgICAgICAgICAgZ2FyYWdlZDogZ3JlZW5bNTAwXSxcclxuICAgICAgICAgICAgICAgIGltcG91bmRlZDogcmVkWzUwMF0sXHJcbiAgICAgICAgICAgICAgICBzZWl6ZWQ6IHJlZFs1MDBdLFxyXG4gICAgICAgICAgICAgICAgdW5rbm93bjogZ3JleVs1MDBdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9hdDoge1xyXG4gICAgICAgICAgICBpY29uOiBSZWFjdC5jcmVhdGVFbGVtZW50KERpcmVjdGlvbnNCb2F0SWNvbiwgeyBzeDogeyBmb250U2l6ZTogMzUgfSB9KSxcclxuICAgICAgICAgICAgc3RhdHVzOiB7XHJcbiAgICAgICAgICAgICAgICBvdXQ6IG9yYW5nZVs1MDBdLFxyXG4gICAgICAgICAgICAgICAgZ2FyYWdlZDogZ3JlZW5bNTAwXSxcclxuICAgICAgICAgICAgICAgIGltcG91bmRlZDogcmVkWzUwMF0sXHJcbiAgICAgICAgICAgICAgICBzZWl6ZWQ6IHJlZFs1MDBdLFxyXG4gICAgICAgICAgICAgICAgdW5rbm93bjogZ3JleVs1MDBdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYmlrZToge1xyXG4gICAgICAgICAgICBpY29uOiBSZWFjdC5jcmVhdGVFbGVtZW50KFBlZGFsQmlrZUljb24sIHsgc3g6IHsgZm9udFNpemU6IDM1IH0gfSksXHJcbiAgICAgICAgICAgIHN0YXR1czoge1xyXG4gICAgICAgICAgICAgICAgb3V0OiBvcmFuZ2VbNTAwXSxcclxuICAgICAgICAgICAgICAgIGdhcmFnZWQ6IGdyZWVuWzUwMF0sXHJcbiAgICAgICAgICAgICAgICBpbXBvdW5kZWQ6IHJlZFs1MDBdLFxyXG4gICAgICAgICAgICAgICAgc2VpemVkOiByZWRbNTAwXSxcclxuICAgICAgICAgICAgICAgIHVua25vd246IGdyZXlbNTAwXSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIHZhciBleHBhbmRJdGVtID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgc2V0Q29sbGFwc2VJZChpZCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgbnVsbCwgT2JqZWN0LmtleXModmVoaWNsZXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0LCB7IHN1YmhlYWRlcjogUmVhY3QuY3JlYXRlRWxlbWVudChMaXN0U3ViaGVhZGVyLCB7IHN4OiB7IGN1cnNvcjogJ3BvaW50ZXInLCBwb3NpdGlvbjogXCJzdGF0aWNcIiB9LCBvbkNsaWNrOiBmdW5jdGlvbiAoKSB7IHJldHVybiBleHBhbmRJdGVtKGtleSk7IH0gfSwga2V5LnRvVXBwZXJDYXNlKCkpIH0sXHJcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb2xsYXBzZSwgeyBpbjogY29sbGFwc2VJZCA9PT0ga2V5IH0sIHZlaGljbGVzW2tleV0ubWFwKGZ1bmN0aW9uICh2ZWgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtLCBudWxsLFxyXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBY2NvcmRpb24sIHsgc3g6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tOiAnNHB4IHNvbGlkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQm90dG9tQ29sb3I6IHR5cGVJY29uW3ZlaC50eXBlXS5zdGF0dXNbdmVoLnN0YXRlXSxcclxuICAgICAgICAgICAgICAgICAgICB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChBY2NvcmRpb25TdW1tYXJ5LCBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgeyBzeDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJveCwgeyBzeDogeyBkaXNwbGF5OiAnZmxleCcsIGdhcDogMywgYWxpZ25JdGVtczogJ2NlbnRlcicgfSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVJY29uW3ZlaC50eXBlXS5pY29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU3RhY2ssIHsgc3BhY2luZzogMSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgc3g6IHsgZm9udFNpemU6IDE1IH0gfSwgdmVoLmJyYW5kICsgJyAnICsgdmVoLnZlaGljbGUpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFR5cG9ncmFwaHksIHsgc3g6IHsgZm9udFNpemU6IDE1IH0gfSwgdmVoLnBsYXRlKSkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUeXBvZ3JhcGh5LCB7IHN4OiB7IGZvbnRTaXplOiAxNCB9IH0sIHZlaC5zdGF0ZS50b1VwcGVyQ2FzZSgpKSkpLFxyXG4gICAgICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQWNjb3JkaW9uRGV0YWlscywgeyBzeDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFZlaGljbGVEZXRhaWxzLCB7IHZlaDogdmVoIH0pKSkpKTtcclxuICAgICAgICB9KSkpKTsgfSkpKTtcclxufTtcclxuIiwiaW1wb3J0IHN0eWxlZCBmcm9tIFwic3R5bGVkLWNvbXBvbmVudHNcIjtcclxuZXhwb3J0IHZhciBIZWFkZXIgPSBzdHlsZWQoJ2RpdicpKHtcclxuICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtc3RhcnQnLFxyXG4gICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICBnYXA6IDIwLFxyXG4gICAgbWFyZ2luQm90dG9tOiAyMCxcclxufSk7XHJcbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufTtcclxudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogU2ltcGxlIHdyYXBwZXIgYXJvdW5kIGZldGNoIEFQSSB0YWlsb3JlZCBmb3IgQ0VGL05VSSB1c2UuXHJcbiAqIEBwYXJhbSBldmVudE5hbWUgLSBUaGUgZW5kcG9pbnQgZXZlbnRuYW1lIHRvIHRhcmdldFxyXG4gKiBAcGFyYW0gZGF0YSAtIERhdGEgeW91IHdpc2ggdG8gc2VuZCBpbiB0aGUgTlVJIENhbGxiYWNrXHJcbiAqXHJcbiAqIEByZXR1cm4gcmV0dXJuRGF0YSAtIEEgcHJvbWlzZSBmb3IgdGhlIGRhdGEgc2VudCBiYWNrIGJ5IHRoZSBOdWlDYWxsYmFja3MgQ0IgYXJndW1lbnRcclxuICovXHJcbmltcG9ydCB7IGlzRW52QnJvd3NlciB9IGZyb20gJy4vbWlzYyc7XHJcbmZ1bmN0aW9uIGZldGNoTnVpKGV2ZW50TmFtZSwgZGF0YSwgbW9ja1Jlc3ApIHtcclxuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucywgcmVzb3VyY2VOYW1lLCByZXNwLCByZXNwb25zZU9iajtcclxuICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFbnZCcm93c2VyKCkgJiYgbW9ja1Jlc3ApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG1vY2tSZXNwXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VOYW1lID0gXCJucHdkX3FiX2dhcmFnZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKFwiaHR0cHM6Ly9cIi5jb25jYXQocmVzb3VyY2VOYW1lLCBcIi9cIikuY29uY2F0KGV2ZW50TmFtZSksIG9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICByZXNwID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlc3AuanNvbigpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZU9iaiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzcG9uc2VPYmpdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBmZXRjaE51aTtcclxuIiwiZXhwb3J0IHZhciBpc0VudkJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgJiYgIXdpbmRvdy5pbnZva2VOYXRpdmU7XHJcbn07XHJcbmV4cG9ydCB2YXIgZ2V0UmVzb3VyY2VOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdy5HZXRQYXJlbnRSZXNvdXJjZU5hbWUgPyB3aW5kb3cgPT09IG51bGwgfHwgd2luZG93ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW5kb3cuR2V0UGFyZW50UmVzb3VyY2VOYW1lKCkgOiAnbnB3ZCc7XHJcbn07XHJcbmV4cG9ydCB2YXIgYnVpbGRSZXNwT2JqID0gZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgZXJyb3JNc2cpIHsgcmV0dXJuICh7XHJcbiAgICBkYXRhOiBkYXRhLFxyXG4gICAgc3RhdHVzOiBzdGF0dXMsXHJcbiAgICBlcnJvck1zZzogZXJyb3JNc2csXHJcbn0pOyB9O1xyXG4iXSwibmFtZXMiOlsiY3giLCJjeSIsInIiLCJkIiwiR2FyYWdlSWNvbiIsImZvbnRTaXplIiwiTm90aWZpY2F0aW9uSWNvbiIsImV4dGVybmFsQXBwQ29uZmlnIiwiaWQiLCJuYW1lTG9jYWxlIiwiY29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJwYXRoIiwiaWNvbiIsImFwcCIsIm5vdGlmaWNhdGlvbkljb24iLCJ0aGVtZSIsImNvb2tlZCIsInJhdyIsIl9fYXNzaWduIiwiT2JqZWN0IiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInAiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJhcHBseSIsInRoaXMiLCJDb250YWluZXIiLCJ0ZW1wbGF0ZU9iamVjdF8xIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9hIiwiaXNEYXJrTW9kZSIsIkFwcCIsInByb3BzIiwiaGlzdG9yeSIsInVzZUhpc3RvcnkiLCJ1c2VTdGF0ZSIsInZlaGljbGVzIiwic2V0VmVoaWNsZXMiLCJfYiIsIm1hcHBlZFZlaCIsInNldE1hcHBlZFZlaCIsInBhbGV0dGUiLCJtb2RlIiwidXNlRWZmZWN0IiwidGhlbiIsInJlc3AiLCJkYXRhIiwibWFwcGVkVmVoaWNsZXMiLCJyZWR1Y2UiLCJ2ZWhzIiwidmVoaWNsZSIsInR5cGUiLCJwdXNoIiwiaW5qZWN0Rmlyc3QiLCJvbkNsaWNrIiwiZ29CYWNrIiwiZm9udFdlaWdodCIsIk51aVByb3ZpZGVyIiwiQVBQX1BSSU1BUllfQ09MT1IiLCJBUFBfVEVYVF9DT0xPUiIsInByaW1hcnkiLCJtYWluIiwiZGFyayIsImxpZ2h0IiwiY29udHJhc3RUZXh0Iiwic2Vjb25kYXJ5Iiwic3VjY2VzcyIsInZlaCIsInN4Iiwid2lkdGgiLCJkaXNhYmxlUGFkZGluZyIsImJvcmRlckJvdHRvbSIsIm1iIiwibWwiLCJtciIsIm1pbldpZHRoIiwidGl0bGUiLCJnYXJhZ2UiLCJNYXRoIiwiY2VpbCIsImVuZ2luZSIsImZ1ZWwiLCJib2R5IiwidmFyaWFudCIsImRpc2FibGVkIiwic3RhdGUiLCJwbGF0ZSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJWZWhpY2xlTGlzdCIsImNvbGxhcHNlSWQiLCJzZXRDb2xsYXBzZUlkIiwidHlwZUljb24iLCJjYXIiLCJzdGF0dXMiLCJvdXQiLCJnYXJhZ2VkIiwiaW1wb3VuZGVkIiwic2VpemVkIiwidW5rbm93biIsImFpcmNyYWZ0IiwiYm9hdCIsImJpa2UiLCJrZXlzIiwibWFwIiwia2V5Iiwic3ViaGVhZGVyIiwiY3Vyc29yIiwicG9zaXRpb24iLCJ0b1VwcGVyQ2FzZSIsImluIiwiYm9yZGVyQm90dG9tQ29sb3IiLCJkaXNwbGF5IiwianVzdGlmeUNvbnRlbnQiLCJhbGlnbkl0ZW1zIiwiZ2FwIiwic3BhY2luZyIsImJyYW5kIiwiZmxleERpcmVjdGlvbiIsIkhlYWRlciIsIm1hcmdpbkJvdHRvbSIsImV2ZW50TmFtZSIsIm1vY2tSZXNwIiwidGhpc0FyZyIsIl9hcmd1bWVudHMiLCJnZW5lcmF0b3IiLCJvcHRpb25zIiwiZiIsInkiLCJnIiwiXyIsImxhYmVsIiwic2VudCIsInRyeXMiLCJvcHMiLCJuZXh0IiwidmVyYiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwidiIsIm9wIiwiVHlwZUVycm9yIiwiZG9uZSIsInBvcCIsImUiLCJzdGVwIiwiX19nZW5lcmF0b3IiLCJtZXRob2QiLCJoZWFkZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsImZldGNoIiwiY29uY2F0IiwianNvbiIsIlAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZ1bGZpbGxlZCIsInJlamVjdGVkIiwicmVzdWx0IiwiaXNFbnZCcm93c2VyIl0sInNvdXJjZVJvb3QiOiIifQ==